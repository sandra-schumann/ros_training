

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Teleoperation &mdash; ROS Training For Industry 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/hacks.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Day 2" href="../day2/index.html" />
    <link rel="prev" title="Introduction to ROS" href="ros_intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ROS Training For Industry
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../template/template.html">Training Style Templates</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/system_setup.html">System Setup</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Day 1</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="welcome_system_setup.html">Welcome &amp; System Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubuntu_gui.html">Introduction to Ubuntu 16.04 GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubuntu_filesystem.html">Exploring the Linux File System</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubuntu_shell.html">The Linux Terminal</a></li>
<li class="toctree-l2"><a class="reference internal" href="ros_intro.html">Introduction to ROS</a></li>
<li class="toctree-l2"><a class="reference internal" href="ros_intro.html#navigating-the-ros-filesystem">Navigating the ROS Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="ros_intro.html#installing-and-running-your-first-ros-node">Installing and Running your first ROS node</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Teleoperation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#clearbot">Clearbot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#start-clearbot-drivers">Start Clearbot drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#teleoperation-using-a-remote-ros-master">Teleoperation using a remote ROS Master</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day2/index.html">Day 2</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day3/index.html">Day 3</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day4/index.html">Day 4</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day5/index.html">Day 5</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROS Training For Industry</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Day 1</a> &raquo;</li>
        
      <li>Teleoperation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/day1/clearbot_teleop.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="teleoperation">
<h1>Teleoperation<a class="headerlink" href="#teleoperation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="clearbot">
<h2>Clearbot<a class="headerlink" href="#clearbot" title="Permalink to this headline">¶</a></h2>
<p>Clearbot is an omnidirectionally moving platform meant for educational purposes. The platform is grown out from the Tartu University’s football robot at ROBOTEX robot competition, which was customized for teaching. Clearbot combines an Intel Realsense 3D depth camera and Intel NUC on-board computer to perform computationally expensive tasks (e.g. 3D mapping) locally on the robot. More information on Clearbot is available <a class="reference external" href="http://clearbot.eu">here</a>.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/clearbot.png"><img alt="../_images/clearbot.png" src="../_images/clearbot.png" style="width: 330.0px; height: 359.5px;" /></a>
</div>
</div>
<div class="section" id="start-clearbot-drivers">
<h2>Start Clearbot drivers<a class="headerlink" href="#start-clearbot-drivers" title="Permalink to this headline">¶</a></h2>
<p>In order to start ROS programs on Clearbot, we need to log into the robot.</p>
<ol class="arabic">
<li><p class="first">Open a new terminal and establish an ssh connection:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>ssh kasutaja@clearbot-X
</pre></div>
</div>
<p>where X has to be replaced with the ID written on the robot. For example: <code class="code docutils literal notranslate"><span class="pre">clearbot-3</span></code>.</p>
</li>
<li><p class="first">Enter the password given to you by the instructor.</p>
<blockquote>
<div><div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For security reasons, passwords are not shown as asterisks or bullets when being typed into the terminal. So no panic, your keyboard works just fine. Simply type the password and hit enter.</p>
</div>
</div></blockquote>
</li>
<li><p class="first">When logged in successfully, you can see that the terminal prompt has changed from <code class="code docutils literal notranslate"><span class="pre">academy&#64;laptop-X</span></code> to <code class="code docutils literal notranslate"><span class="pre">kasutaja&#64;clearbot-X</span></code>. This will be an important reference when trying to figure out which terminal is connected to where.</p>
</li>
<li><p class="first">After logging into the robot, the ROS environment should be automatically sourced for you. You can quickly display the last lines of the file with <code class="code docutils literal notranslate"><span class="pre">tail</span> <span class="pre">~/.bashrc</span></code> command to examine which workspaces are sourced.</p>
</li>
<li><p class="first">Recall the <code class="code docutils literal notranslate"><span class="pre">printenv</span></code> and <code class="code docutils literal notranslate"><span class="pre">echo</span></code> commands to check that the required ROS variables are set.</p>
</li>
<li><p class="first">If all looks good, use to start the driver:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>roslaunch robotont_teleop teleop_bare.launch
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="teleoperation-using-a-remote-ros-master">
<h2>Teleoperation using a remote ROS Master<a class="headerlink" href="#teleoperation-using-a-remote-ros-master" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The robot driver subscribes to a specific type of messages called <em>velocity commands</em>. The standard name for this topic is <code class="code docutils literal notranslate"><span class="pre">/cmd_vel</span></code> or <code class="code docutils literal notranslate"><span class="pre">/robotont/cmd_vel</span></code> when in robot namespace.</li>
<li>The message is of type <code class="code docutils literal notranslate"><span class="pre">geometry_msgs/Twist</span></code> and it’s structure can be found from <cite>ROS wiki &lt;https://docs.ros.org/api/geometry_msgs/html/msg/Twist.html&gt;</cite>.</li>
</ol>
<p>To set and control the robot speed, we need to continuously publish the velocity commands. Tomorrow we look how to write the publishers from scratch, but for now let’s use a package that listens keyboard events and publishes them as <code class="code docutils literal notranslate"><span class="pre">Twist</span></code> messages.</p>
<ol class="arabic">
<li><p class="first">Open a new terminal</p>
</li>
<li><p class="first">Configure the ROS environment to connect to the master on the robot:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>set_master
</pre></div>
</div>
</li>
<li><p class="first">The small script asks for the robot’s ID and sets ROS environmental variables accordingly.</p>
</li>
<li><p class="first">Now you are ready to run the ros node which listens keyboard events and publishes them as velocity commands:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre>roslaunch robotont_teleop teleop_pc_side.launch
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>From this point beyond, you are able to drive the robot with a keyboard. Should you loose control over the robot, do one of the following</p>
<ul class="last simple">
<li>PRESS “k” TO STOP THE ROBOT!</li>
<li>PRESS THE EMERGENCY SWITCH ON THE ROBOT.</li>
<li>LIFT THE ROBOT FROM THE GROUND AND CALL AN INSTRUCTOR.</li>
</ul>
</div>
</div></blockquote>
</li>
<li><p class="first">Look at the instructions printed to the terminal. Your tasks are:</p>
<ol class="arabic simple">
<li>Move around to understand the dynamics of the robot;</li>
<li>Use Shift or Caps Lock to use holonomic mode;</li>
<li>Change the driving speed by increasing / decreasing linear and agular velocities.</li>
</ol>
<blockquote>
<div><div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Notice that the teleop node only receives keypresses only when the terminal window is active.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Use <code class="code docutils literal notranslate"><span class="pre">CTRL</span> <span class="pre">+</span> <span class="pre">C</span></code> to stop the node.</p>
</div>
</div></blockquote>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../day2/index.html" class="btn btn-neutral float-right" title="Day 2" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ros_intro.html" class="btn btn-neutral float-left" title="Introduction to ROS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, University of Tartu, License CC BY-ND-NC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>