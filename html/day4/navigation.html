

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Navigation &mdash; ROS Training For Industry 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/hacks.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3D mapping" href="3dmap.html" />
    <link rel="prev" title="2D SLAM with a robot" href="2d_slam.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ROS Training For Industry
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/system_setup.html">System Setup</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day1/index.html">Day 1</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day2/index.html">Day 2</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day3/index.html">Day 3</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Day 4</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="transforms.html">Transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="mappinginsim.html">Mapping in simulated environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="2d_slam.html">2D SLAM with a robot</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Navigation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-slam-and-navigation-launch-file">Configuring SLAM and navigation launch file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#launching-slam-and-navstack-and-mapping-the-room">Launching SLAM and navstack and mapping the room</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-ros-navstack">Using ROS navstack</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-navstack">Configuring navstack</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="3dmap.html">3D mapping</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day5/index.html">Day 5</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROS Training For Industry</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Day 4</a> &raquo;</li>
        
      <li>Navigation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/day4/navigation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="navigation">
<h1>Navigation<a class="headerlink" href="#navigation" title="Permalink to this headline">¶</a></h1>
<p>Now that you have successfully tuned your SLAM package,
it is time to move on to autonomous navigation.</p>
<div class="section" id="configuring-slam-and-navigation-launch-file">
<h2>Configuring SLAM and navigation launch file<a class="headerlink" href="#configuring-slam-and-navigation-launch-file" title="Permalink to this headline">¶</a></h2>
<p>First of all, we have to configure our
launch file like when we worked with 2D mapping.</p>
<ol class="arabic simple">
<li>Open <em>teleop_carto_with_navstack.launch</em> from your package.</li>
<li>Change the launch file so that it reads
configuration files from your package.
(NOTE: You have to change paths in 8 places.)</li>
</ol>
</div>
<div class="section" id="launching-slam-and-navstack-and-mapping-the-room">
<h2>Launching SLAM and navstack and mapping the room<a class="headerlink" href="#launching-slam-and-navstack-and-mapping-the-room" title="Permalink to this headline">¶</a></h2>
<p>Now that you have configured the launch files,
let’s try running the navstack on Clearbot.</p>
<ol class="arabic">
<li><p class="first">In robot’s terminal, run <strong>roscore</strong>.</p>
</li>
<li><p class="first">In another robot terminal, launch</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>roslaunch &lt;your_package_name&gt; teleop_carto_with_navstack.launch.launch
</pre></div>
</div>
<p>This will run the mapping software.</p>
</li>
<li><p class="first">In the PC, launch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>roslaunch robotont_description display_2dmapping.launch
</pre></div>
</div>
<p>This will launch preconfigured RViz environment.</p>
</li>
<li><p class="first">In the PC, launch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre>roslaunch robotont_teleop teleop_pc_side.launch
</pre></div>
</div>
<p>From this terminal, you can control the robot.</p>
</li>
<li><p class="first">All very similar to last task, now you should be able to map.</p>
</li>
<li><p class="first">If you are satisfied with your map, move on to navigation.</p>
</li>
</ol>
<p>If you want to save your map, you can use:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre>rosrun map_server map_saver
</pre></div>
</div>
</div></blockquote>
<p>And load it later with:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre>rosrun map_server map_server map.yaml
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="using-ros-navstack">
<h2>Using ROS navstack<a class="headerlink" href="#using-ros-navstack" title="Permalink to this headline">¶</a></h2>
<p>Using the navstack in ROS is very straightforward,
you tell the robot where it is
(if it doesnt already know) and where it needs to go.</p>
<ol class="arabic">
<li><p class="first">In case you have not created a map right now
and instead loaded it in externally,
you have to tell the robot where it currently is.</p>
<p><strong>If you have just created
a map and have not loaded it in separately and
the robot seems to be in RViz, where it is actually,
then you may SKIP THIS STEP.</strong></p>
<p>For setting initial pose, click on 2D Pose Estimate
and drag the arrow where and how the robot actually is.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/2dposeestimate.png"><img alt="../_images/2dposeestimate.png" src="../_images/2dposeestimate.png" style="width: 910.7px; height: 520.8px;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/poseestimatearrow.png"><img alt="../_images/poseestimatearrow.png" src="../_images/poseestimatearrow.png" style="width: 910.7px; height: 520.8px;" /></a>
</div>
</li>
<li><p class="first">To tell the robot where to go, click on 2D Nav Goal
and drag the arrow to where you want the robot to go
and which way does it have to face.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/2dnavgoal.png"><img alt="../_images/2dnavgoal.png" src="../_images/2dnavgoal.png" style="width: 910.7px; height: 520.8px;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/2dnavgoalarrow.png"><img alt="../_images/2dnavgoalarrow.png" src="../_images/2dnavgoalarrow.png" style="width: 910.7px; height: 520.8px;" /></a>
</div>
</li>
</ol>
</div>
<div class="section" id="configuring-navstack">
<h2>Configuring navstack<a class="headerlink" href="#configuring-navstack" title="Permalink to this headline">¶</a></h2>
<p>Now that you have the experience of how navigation works in ROS,
let’s try tuning some parameters to improve (or not) the navigation software.</p>
<p>In your package’s configuration folder,
the relevant files are those that begin with “costmap” and <em>planner.yaml</em>.</p>
<p>From these files, you can configure
how your robot uses the navigation stack.
The most important file here for you is <em>planner.yaml</em>.
From this file, you can tune the parameters for the planner.
Reference can be found here: <a class="reference external" href="http://wiki.ros.org/base_local_planner">http://wiki.ros.org/base_local_planner</a> .</p>
<ol class="arabic">
<li><p class="first">First, open <em>navstack.launch</em> and change the paths to point
to your configuration files just like before.</p>
</li>
<li><p class="first">Now open <em>planner.yaml</em>. Your task is to configure the planner
and make it work better.</p>
<p>What if you would change acceleration limits?
What if you would try to increase or decrease the goal tolerance?
What if you changed local and global map sizes in the launch file?
You can use ROS Wiki to see what the parameters do and make the
robot navigate more accurately.</p>
</li>
<li><p class="first">To test your new configuration, launch <em>navstack.launch</em>.
If you have launched <em>teleop_carto_with_navstack.launch</em>
then this launch will kill the navstack process in that
terminal and launch a new one.</p>
<p>After the first launch, for next testing, just use Ctrl+C to
kill the process and then launch it again.</p>
</li>
<li><p class="first">If you are satisfied with the performance of your navigation,
congratulations!</p>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="3dmap.html" class="btn btn-neutral float-right" title="3D mapping" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="2d_slam.html" class="btn btn-neutral float-left" title="2D SLAM with a robot" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, University of Tartu, License CC BY-ND-NC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>